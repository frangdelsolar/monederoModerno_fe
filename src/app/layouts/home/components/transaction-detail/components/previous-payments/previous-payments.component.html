<app-input-switch
  [label]="'Mostrar cambio'"
  [control]="showExchangeColumn"
></app-input-switch>

<app-input-switch
  [label]="'Mostrar total'"
  [control]="showTotal"
></app-input-switch>
<p-table
  [value]="payments"
  [paginator]="true"
  [rows]="5"
  [rowsPerPageOptions]="[5, 10, 25, 50]"
  [styleClass]="'p-datatable-sm p-datatable-striped'"
>
  <ng-template pTemplate="header">
    <tr>
      <th>Cuota</th>
      <th>Vencimiento</th>
      <th>Fecha de pago</th>
      <th>Total abonado</th>
      <th *ngIf="showExchangeColumn.value">Cambio</th>
      <th *ngIf="showExchangeColumn.value">Conversi√≥n</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-payment>
    <tr>
      <td>{{ payment.installment_number }}</td>
      <td>{{ payment.due_date | date : "dd/MM/yy" }}</td>
      <td>{{ payment.transaction_date | date : "dd/MM/yy" }}</td>
      <td>{{ payment.currency.currency }} ${{ payment.currency.amount }}</td>
      <td *ngIf="showExchangeColumn.value">
        {{ payment.currency.exchange_rate }}
      </td>
      <td
        *ngIf="showExchangeColumn.value && payment.currency.currency == 'ARS'"
      >
        USD ${{
          (
            payment.currency.amount / payment.currency.exchange_rate
          ).toLocaleString()
        }}
      </td>
      <td
        *ngIf="showExchangeColumn.value && payment.currency.currency == 'USD'"
      >
        ARS ${{
          (
            payment.currency.exchange_rate * payment.currency.amount
          ).toLocaleString()
        }}
      </td>
    </tr>
  </ng-template>
</p-table>

<p *ngIf="showTotal.value" class="font-bold text-lg">
  Total USD ${{ total.toLocaleString() }}
</p>
<!-- <p *ngIf="showTotal.value && percentage != undefined" class="font-bold text-lg">
  Porcentaje del total %{{ percentage.toFixed(2) }}
</p> -->
